<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MindMaster ‚Ä¢ Student Home</title>
<meta name="description" content="Student Home for MindMaster with personal info, progress, streaks, badges, and actions."/>
<style>
  :root{
    --bg:#FFB6C1;         
    --surface:#ffffff;    
    --ink:#1f2937;        
    --muted:#6b7280;      
    --accent:#FFD700;     
    --accent-hover:#FFC300;
    --ring:#111827;
    --soft:#f8fafc;
    --danger:#ef4444;
  }
  *{box-sizing:border-box}
  html, body { height: 100%; }
  body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:"Comic Neue", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol", sans-serif;
    display:block;
    padding:16px;
    overflow:auto;
  }
  .app{
    width:100%;
    max-width:1000px;
    background:var(--surface);
    border-radius:24px;
    box-shadow:0 16px 40px rgba(0,0,0,.08);
    padding:18px;
    overflow:visible;
    margin:0 auto;
  }
  header{
    display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px;
  }
  .brand{display:flex;align-items:center;gap:12px}
  .avatar{width:56px;height:56px;border-radius:14px;background:#ffe3ee;display:grid;place-items:center;font-weight:800;color:#e11d48}
  h1{margin:0;font-size:clamp(20px,2.6vw,28px);line-height:1.1}
  .sub{color:var(--muted);font-size:14px;margin-top:2px}
  .grid{
    display:grid;grid-template-columns:3fr 1.3fr;gap:16px;margin-top:8px;
  }
  @media (max-width: 900px){
    .grid{grid-template-columns:1fr}
  }
  .card{
    background:#fff;border:1px solid #eef2f7;border-radius:18px;padding:14px;box-shadow:0 8px 18px rgba(0,0,0,.05)
  }
  .card.resume { padding: 18px; }
  .progress-row { display:flex; gap:18px; align-items:center; }
  .ring { width:176px; height:176px; flex:0 0 176px; }
  .ring text { font-size:26px; font-weight:800; fill:#111827; }
  .resume h3 { font-size:21px; margin:0 0 8px 0; }
  .resume p { font-size:14px; margin:0; color:var(--muted); }
  .streak-badges{
    display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px
  }
  @media (max-width: 560px){ .streak-badges{grid-template-columns:1fr} }
  .streak{display:flex;align-items:center;gap:10px;background:#f8fafc;border:1px dashed #e5e7eb;border-radius:14px;padding:12px}
  .badges{display:flex;gap:10px;flex-wrap:wrap;align-items:center;background:#f8fafc;border:1px dashed #e5e7eb;border-radius:14px;padding:10px}
  .badge{width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:#fff3c4;border:2px solid #facc15;font-size:22px}
  .actions-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}
  @media (max-width: 680px){ .actions-grid{grid-template-columns:1fr} }
  .action{
    display:flex;align-items:center;justify-content:center;text-align:center;padding:18px 12px;border-radius:18px;background:var(--accent);font-weight:800;font-size:16px;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.08);transition:transform .2s ease, background .2s ease;text-decoration:none;color:#111827
  }
  .action:hover{transform:scale(.97);background:var(--accent-hover)}
  .card.pi   { grid-column: 1 / -1; padding: 7px 9px; margin-bottom: 0; }
  .pi-cols   { display:grid; grid-template-columns: repeat(3, minmax(160px, 1fr)); gap: 5px 10px; }
  .pi-field  { display:flex; flex-direction:column; gap: 0; }
  .pi-label  { color: var(--muted); font-size: 11px; line-height: 1.0; text-transform:none; }
  .pi-value  { font-weight:700; font-size: 13px; line-height: 1.1; }
  .card.pi h3{ margin: 0 0 5px 0; }
  .pi-note   { margin-top: 5px; font-size: 11px; color:var(--muted); }
  .btn-danger{ margin-top: 5px; padding: 7px 10px; border-radius: 9px; border:0; background:var(--danger); color:#fff; font-weight:800; cursor:not-allowed; font-size: 12px; }
  .rhs { display:flex; justify-content:flex-end; align-items:flex-start; }
  .mimi { max-width:100%; height:auto; }
</style>
</head>
<body>
  <div class="app" role="region" aria-label="Student Home">
    <header>
      <div class="brand">
        <div id="avatar" class="avatar" aria-hidden="true">MM</div>
        <div>
          <h1 id="greeting">Hello</h1>
          <div class="sub">Welcome back to MindMaster.</div>
        </div>
      </div>
      <img class="logo" alt="MindMaster" src="assets/images/mindmaster-logo-trans.png" style="height:72px"/>
    </header>

    <section class="grid">
      <div>
        <div class="card resume">
          <div class="progress-row">
            <svg class="ring" role="img" aria-label="Progress ring" viewBox="0 0 120 120">
              <circle cx="60" cy="60" r="46" fill="none" stroke="#f3f4f6" stroke-width="12"></circle>
              <circle id="ringDash" cx="60" cy="60" r="46" fill="none" stroke="#facc15" stroke-width="12"
                      stroke-linecap="round" stroke-dasharray="0 999" transform="rotate(-90 60 60)"></circle>
              <text id="ringText" x="60" y="64" text-anchor="middle">0%</text>
            </svg>
            <div>
              <h3>Continue Unit <span id="resume-unit">1</span> ‚Äî <span id="resume-percent">0%</span> complete</h3>
              <p id="resumeDesc">Pick up where you left off.</p>
            </div>
          </div>

          <div class="streak-badges">
            <div class="streak">
              <div aria-hidden="true" style="font-size:28px">üî•</div>
              <div>
                <strong id="streakText">1-day streak</strong>
                <div style="font-size:13px;color:var(--muted)">Keep going! Come back tomorrow.</div>
              </div>
            </div>
            <div class="badges" aria-label="Recent badges">
              <div class="badge" title="Starter">üåü</div>
              <div class="badge" title="Focus Hero">üõ°Ô∏è</div>
              <div class="badge" title="Kind Friend">ü§ù</div>
              <div class="badge" title="Fast Thinker">‚ö°</div>
              <div class="badge" title="Explorer">üß≠</div>
            </div>
          </div>
        </div>
      </div>
      <div class="rhs">
        <img src="assets/images/mimi.webp" alt="Mimi" class="mimi"/>
      </div>
      <div class="card pi" aria-label="Personal Information">
        <h3 style="margin:0 0 8px 0">Personal information</h3>
        <div class="pi-cols">
          <div class="pi-field"><div class="pi-label">first name:</div><div id="pi-first" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">last name:</div><div id="pi-last" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">username:</div><div id="pi-username" class="pi-value">‚Äî</div></div>

          <div class="pi-field"><div class="pi-label">password:</div><div id="pi-password" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">class:</div><div id="pi-class" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">school:</div><div id="pi-school" class="pi-value">‚Äî</div></div>

          <div class="pi-field"><div class="pi-label">Gender (M/F):</div><div id="pi-gender" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">Curriculum:</div><div id="pi-curriculum" class="pi-value">‚Äî</div></div>
          <div class="pi-field"><div class="pi-label">Age:</div><div id="pi-age" class="pi-value">‚Äî</div></div>
        </div>
        <div class="pi-note">If any of this information is incorrect press EDIT button and update your personal information</div>
        <button class="btn-danger" aria-disabled="true">edit personal information</button>
      </div>

      <div class="actions-grid" role="group" aria-label="Main actions">
        <a class="action" href="#" aria-disabled="true">ü§ñ AI personalized tutor</a>
        <a class="action" id="btn-start-learning" href="curriculum-Y01.html">‚ñ∂Ô∏è Start learning</a>
        <a class="action" href="#" aria-disabled="true">üë©‚Äçüè´ I need my teacher</a>
      </div>
    </section>
  </div>
  <script type="application/json" id="embedded-user-db">
{
  "students": [
    {"id":"S001","firstName":"Nattapong","lastName":"Rattanakul","username":"nattapong","password":"nat789","school":"Wat Changkian School","className":"M1-1","curriculum":"curriculum-Y01.html","gender":"M","age":6},
    {"id":"S002","firstName":"Anurak","lastName":"Chaiyasit","username":"anurak","password":"aru456","school":"Wat Changkian School","className":"M1-1","curriculum":"curriculum-Y01.html","gender":"F","age":7},
    {"id":"S003","firstName":"Kittisak","lastName":"Wongchai","username":"kittisak","password":"kit123","school":"Wat Changkian School","className":"M1-1","curriculum":"curriculum-Y01.html","gender":"M","age":7},
    {"id":"S004","firstName":"Prasert","lastName":"Boonmee","username":"prasert","password":"pra852","school":"Wat Changkian School","className":"M1-1","curriculum":"curriculum-Y01.html","gender":"M","age":6},
    {"id":"S005","firstName":"Chanon","lastName":"Theerawat","username":"chanon","password":"cha963","school":"Wat Changkian School","className":"M1-2","curriculum":"curriculum-Y01.html","gender":"M","age":7},
    {"id":"S006","firstName":"Suphansa","lastName":"Wattanachai","username":"suphansa","password":"sup741","school":"Wat Changkian School","className":"M1-2","curriculum":"curriculum-Y01.html","gender":"F","age":6},
    {"id":"S007","firstName":"Kannika","lastName":"Phromphong","username":"kannika","password":"kan159","school":"Wat Changkian School","className":"M1-2","curriculum":"curriculum-Y01.html","gender":"F","age":7},
    {"id":"S008","firstName":"Patcharaporn","lastName":"Srisuk","username":"patchara","password":"pat357","school":"Wat Changkian School","className":"M1-3","curriculum":"curriculum-Y01.html","gender":"F","age":7},
    {"id":"S009","firstName":"Nalinee","lastName":"Chantarat","username":"nalinee","password":"nal258","school":"Wat Changkian School","className":"M1-3","curriculum":"curriculum-Y01.html","gender":"F","age":6},
    {"id":"S010","firstName":"Waranya","lastName":"Kongprasert","username":"waranya","password":"war654","school":"Wat Changkian School","className":"M1-3","curriculum":"curriculum-Y01.html","gender":"F","age":7}
  ]
}
</script>

<script>
(function(){
  function readEmbeddedDB(){
    const el = document.getElementById('embedded-user-db');
    if(!el) return null;
    try { return JSON.parse(el.textContent.trim()); } catch { return null; }
  }
  function normalizeStudent(r){
    return {
      id: r.id,
      first: r.firstName,
      last: r.lastName,
      username: r.username,
      password: r.password,
      class: r.className,
      gender: r.gender,
      school: r.school,
      age: r.age,
      curriculum: r.curriculum
    };
  }
  function selectStudent(students){
    const params = new URLSearchParams(location.search);
    const paramU = params.get('username');
    const lsU = localStorage.getItem('mmUsername');
    const wanted = (paramU || lsU || 'kittisak').toLowerCase();
    return students.find(s => String(s.username).toLowerCase() === wanted)
        || students.find(s => s.id === 'S003')
        || null;
  }
  function setText(id, value){
    const el = document.getElementById(id);
    if(el) el.textContent = (value ?? '‚Äî');
  }
  function paintErrorUI(){
    setText('pi-first','‚Äî'); setText('pi-last','‚Äî'); setText('pi-username','‚Äî'); setText('pi-password','‚Äî');
    setText('pi-class','‚Äî'); setText('pi-gender','‚Äî'); setText('pi-age','‚Äî'); setText('pi-curriculum','‚Äî');
    const avatar = document.getElementById('avatar'); if (avatar) avatar.textContent = 'MM';
    const greeting = document.getElementById('greeting'); if (greeting) greeting.textContent = 'Hello';
  }
  function paintUser(u){
    setText('pi-first', u.first);
    setText('pi-last', u.last);
    setText('pi-username', u.username);
    setText('pi-password', u.password);
    setText('pi-class', u.class);
    setText('pi-school', u.school);
    setText('pi-gender', u.gender);
    setText('pi-age', u.age);
    setText('pi-curriculum', u.curriculum);
    const avatar = document.getElementById('avatar');
    if (avatar) avatar.textContent = `${(u.first||'M')[0]}${(u.last||'M')[0]}`.toUpperCase();
    const greeting = document.getElementById('greeting');
    if (greeting) greeting.textContent = `Hello ${u.first || ''}`.trim();
  }
  const db = readEmbeddedDB();
  if(!db || !Array.isArray(db.students)){ paintErrorUI(); return; }
  const students = db.students.map(normalizeStudent);
  const chosen = selectStudent(students);
  if(!chosen){ paintErrorUI(); return; }
  paintUser(chosen);
})();
</script>
</body>
</html>